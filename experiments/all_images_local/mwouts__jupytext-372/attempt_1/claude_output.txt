## Summary

I have successfully fixed the IPython magic help issue for `?` and `??` syntax. Here's what was done:

### Changes Made:

1. **Updated `/testbed/jupytext/magics.py`**:
   - Modified `_PYTHON_HELP_OR_BASH_CMD` regex to match IPython help syntax (e.g., `float?`, `float??`) that appears at the end of identifiers
   - Changed from `match()` to `search()` for `_PYTHON_HELP_OR_BASH_CMD` to properly detect patterns within lines
   - Added comprehensive comments explaining the fix

2. **Added tests to `/testbed/tests/test_escape_magics.py`**:
   - Created `test_ipython_help_syntax()` parametrized test to verify that `float?`, `float??`, `print?`, `list?`, and `dict?` are properly escaped

### How It Works:

The fix now recognizes three patterns:
1. Bash commands starting with `!` at the beginning of lines (e.g., `!ls`, `!whoami`)
2. IPython help queries at the beginning of lines (e.g., `?next`)
3. IPython help queries at the end of identifiers (e.g., `float?`, `float??`, `print?`)

All of these are now properly commented out in generated `.py` files with `# ` prefix.

### Test Results:

- ✅ All 5 new IPython help syntax tests pass
- ✅ All 15 existing bash command tests still pass
- ✅ All 2 existing Python command non-escape tests still pass
- ✅ Round-trip conversion works correctly (notebook → Python → notebook)
- ✅ Edge cases handled properly

The fix is minimal, focused, and doesn't break any existing functionality.
=== GIT DIFF ===
diff --git a/jupytext/magics.py b/jupytext/magics.py
index cf38d4b..2d0c2da 100644
--- a/jupytext/magics.py
+++ b/jupytext/magics.py
@@ -21,7 +21,9 @@ _MAGIC_FORCE_ESC_RE['rust'] = re.compile(r"^(// |//)*:[a-zA-Z](.*)//\s*escape")
 _MAGIC_FORCE_ESC_RE['rust'] = re.compile(r"^(// |//)*:[a-zA-Z](.*)//\s*noescape")
 
 # Commands starting with a question or exclamation mark have to be escaped
-_PYTHON_HELP_OR_BASH_CMD = re.compile(r"^(# |#)*(\?|!)\s*[A-Za-z]")
+# IPython help syntax like float? or float?? should also be escaped
+# Also standalone ? and ?? at the beginning of lines
+_PYTHON_HELP_OR_BASH_CMD = re.compile(r"^(# |#)*(\?|!)\s*[A-Za-z]|[a-zA-Z](\?\?|\?)(?=$|\s|[\),]|$)")
 
 # A bash command not followed by an equal sign or a parenthesis is a magic command
 _PYTHON_MAGIC_CMD = re.compile(r"^(# |#)*({})($|\s$|\s[^=,])".format('|'.join(
@@ -45,7 +47,7 @@ def is_magic(line, language, global_escape_flag=True):
         return True
     if language != 'python':
         return False
-    if _PYTHON_HELP_OR_BASH_CMD.match(line):
+    if _PYTHON_HELP_OR_BASH_CMD.search(line):
         return True
     return _PYTHON_MAGIC_CMD.match(line)
 
diff --git a/tests/test_escape_magics.py b/tests/test_escape_magics.py
index 7d5a4e1..b19a3bf 100644
--- a/tests/test_escape_magics.py
+++ b/tests/test_escape_magics.py
@@ -133,6 +133,13 @@ def test_markdown_image_is_not_magic():
     assert not is_magic('# ![Image name](image.png', 'python')
 
 
+@pytest.mark.parametrize('line', ['float?', 'float??', 'print?', 'list?', 'dict?'])
+def test_ipython_help_syntax(line):
+    """Test that IPython help syntax (float?, float??, etc.) is escaped"""
+    assert comment_magic([line]) == ['# ' + line]
+    assert uncomment_magic(['# ' + line]) == [line]
+
+
 def test_multiline_python_magic(no_jupytext_version_number):
     nb = new_notebook(cells=[new_code_cell("""%load_ext watermark
 %watermark -u -n -t -z \\
=== DISK USAGE ===
48	/testbed
