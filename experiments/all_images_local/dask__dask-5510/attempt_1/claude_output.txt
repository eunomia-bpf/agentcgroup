
=== GIT DIFF ===
diff --git a/dask/array/numpy_compat.py b/dask/array/numpy_compat.py
index 4443cda21..0258a6208 100644
--- a/dask/array/numpy_compat.py
+++ b/dask/array/numpy_compat.py
@@ -1,14 +1,17 @@
-from distutils.version import LooseVersion
+try:
+    from packaging.version import Version as LooseVersion
+except ImportError:
+    from distutils.version import LooseVersion
 
 import numpy as np
 import warnings
 
 from ..utils import derived_from
 
-_numpy_115 = LooseVersion(np.__version__) >= "1.15.0"
-_numpy_116 = LooseVersion(np.__version__) >= "1.16.0"
-_numpy_117 = LooseVersion(np.__version__) >= "1.17.0"
-_numpy_118 = LooseVersion(np.__version__) >= "1.18.0"
+_numpy_115 = LooseVersion(np.__version__) >= LooseVersion("1.15.0")
+_numpy_116 = LooseVersion(np.__version__) >= LooseVersion("1.16.0")
+_numpy_117 = LooseVersion(np.__version__) >= LooseVersion("1.17.0")
+_numpy_118 = LooseVersion(np.__version__) >= LooseVersion("1.18.0")
 
 
 # Taken from scikit-learn:
@@ -18,7 +21,7 @@ try:
         if (
             not np.allclose(
                 np.divide(0.4, 1, casting="unsafe"),
-                np.divide(0.4, 1, casting="unsafe", dtype=np.float),
+                np.divide(0.4, 1, casting="unsafe", dtype=np.float64),
             )
             or not np.allclose(np.divide(1, 0.5, dtype="i8"), 2)
             or not np.allclose(np.divide(0.4, 1), 0.4)
@@ -47,7 +50,7 @@ except TypeError:
     )
 
 
-if LooseVersion(np.__version__) < "1.15.0":
+if LooseVersion(np.__version__) < LooseVersion("1.15.0"):
     # These functions were added in numpy 1.15.0. For previous versions they
     # are duplicated here
 
diff --git a/dask/array/routines.py b/dask/array/routines.py
index 6c30d96da..c30c6ef15 100644
--- a/dask/array/routines.py
+++ b/dask/array/routines.py
@@ -42,6 +42,7 @@ from .numpy_compat import _unravel_index_keyword
 
 @derived_from(np)
 def array(x, dtype=None, ndmin=None):
+    x = asanyarray(x)
     while ndmin is not None and x.ndim < ndmin:
         x = x[None, :]
     if dtype is not None and x.dtype != dtype:
@@ -532,7 +533,7 @@ def gradient(f, *varargs, **kwargs):
             "Spacing must either be a single scalar, or a scalar / 1d-array per axis"
         )
 
-    if issubclass(f.dtype.type, (np.bool8, Integral)):
+    if issubclass(f.dtype.type, (np.bool_, Integral)):
         f = f.astype(float)
     elif issubclass(f.dtype.type, Real) and f.dtype.itemsize < 4:
         f = f.astype(float)
diff --git a/dask/array/tests/test_routines.py b/dask/array/tests/test_routines.py
index e38395d5d..766d0200f 100644
--- a/dask/array/tests/test_routines.py
+++ b/dask/array/tests/test_routines.py
@@ -1,8 +1,12 @@
 import itertools
 from numbers import Number
+import warnings
 
 import pytest
-from distutils.version import LooseVersion
+try:
+    from packaging.version import Version as LooseVersion
+except ImportError:
+    from distutils.version import LooseVersion
 
 np = pytest.importorskip("numpy")
 
@@ -627,7 +631,8 @@ def test_cov():
 
     assert_eq(da.cov(d), np.cov(x))
     assert_eq(da.cov(d, rowvar=0), np.cov(x, rowvar=0))
-    with pytest.warns(None):  # warning dof <= 0 for slice
+    with warnings.catch_warnings():
+        warnings.simplefilter("ignore")
         assert_eq(da.cov(d, ddof=10), np.cov(x, ddof=10))
     assert_eq(da.cov(d, bias=1), np.cov(x, bias=1))
     assert_eq(da.cov(d, d), np.cov(x, x))
@@ -747,7 +752,8 @@ def test_isin_rand(
     a2 = rng.randint(low, high, size=test_shape) - 5
     d2 = da.from_array(a2, chunks=test_chunks)
 
-    with pytest.warns(None):
+    with warnings.catch_warnings():
+        warnings.simplefilter("ignore")
         r_a = np.isin(a1, a2, invert=invert)
         r_d = da.isin(d1, d2, invert=invert)
     assert_eq(r_a, r_d)
@@ -1538,7 +1544,8 @@ def test_einsum(einsum_signature):
 
     np_inputs, da_inputs = _numpy_and_dask_inputs(input_sigs)
 
-    with pytest.warns(None):
+    with warnings.catch_warnings():
+        warnings.simplefilter("ignore")
         assert_eq(
             np.einsum(einsum_signature, *np_inputs),
             da.einsum(einsum_signature, *da_inputs),
diff --git a/dask/compatibility.py b/dask/compatibility.py
index f89bea077..57e47e0cc 100644
--- a/dask/compatibility.py
+++ b/dask/compatibility.py
@@ -1,5 +1,8 @@
 import sys
-from distutils.version import LooseVersion
+try:
+    from packaging.version import Version as LooseVersion
+except ImportError:
+    from distutils.version import LooseVersion
 
 # TODO: remove this import once dask requires distributed > 2.3.2
 from .utils import apply  # noqa
=== DISK USAGE ===
151	/testbed
